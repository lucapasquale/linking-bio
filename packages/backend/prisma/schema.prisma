generator client {
  provider = "prisma-client-js"
  output   = "./generated/client"
}

datasource db {
  provider = "postgresql"
  url      = env("PG_URI")
}

model Link {
  /// The value of this field is generated by the database as: `uuid_generate_v4()`.
  id        String   @id @default(dbgenerated())
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @default(now()) @map("updated_at")
  title     String
  url       String
  pageId    String?  @map("page_id")
  sortOrder Int      @default(0) @map("sort_order")
  pages     Page?    @relation(fields: [pageId], references: [id])

  @@index([pageId], name: "links_page_id_idx")
  @@map("links")
}

model Page {
  /// The value of this field is generated by the database as: `uuid_generate_v4()`.
  id        String   @id @default(dbgenerated())
  slug      String   @unique
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @default(now()) @map("updated_at")
  userId    String   @unique @map("user_id")
  theme     String   @default("DARK")
  users     User     @relation(fields: [userId], references: [id])
  links     Link[]

  @@index([slug], name: "pages_slug_idx")
  @@map("pages")
}

model User {
  /// The value of this field is generated by the database as: `uuid_generate_v4()`.
  id             String   @id @default(dbgenerated())
  createdAt      DateTime @default(now()) @map("created_at")
  updatedAt      DateTime @default(now()) @map("updated_at")
  name           String
  email          String   @unique
  hashedPassword String   @map("hashed_password")
  avatarUrl      String?  @map("avatar_url")
  social         Json     @default("[]")
  recoveryToken  String?  @map("recovery_token")
  role           String   @default("USER")
  pages          Page?

  @@index([email], name: "users_email_idx")
  @@map("users")
}
