{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/luca/code/lucapasquale/linking-bio/packages/frontend/src/pages/auth/login.tsx\";\nimport React, { useEffect } from 'react';\nimport { config } from '~src/config';\nimport { userPageQuery } from '~Admin/graphql/user-page';\nimport { AuthWrapper } from '~Auth/components/AuthWrapper';\nimport { Form } from '~Auth/routes/Login/components/Form';\nexport default function Page() {\n  const {\n    data,\n    loading,\n    error\n  } = userPageQuery();\n  useEffect(() => {\n    if (loading) {\n      return;\n    }\n\n    if (!error && data !== null && data !== void 0 && data.user.id) {\n      window.location.href = '/admin';\n    }\n  }, [loading, data, error]);\n\n  const onSuccess = (accessToken, refreshToken) => {\n    localStorage.setItem(config.ACCESS_TOKEN_KEY, accessToken);\n    localStorage.setItem(config.REFRESH_TOKEN_KEY, refreshToken);\n    window.location.href = '/admin';\n  };\n\n  return /*#__PURE__*/_jsxDEV(AuthWrapper, {\n    title: \"LOGIN\",\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      onSuccess: onSuccess\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"sources":["/home/luca/code/lucapasquale/linking-bio/packages/frontend/src/pages/auth/login.tsx"],"names":["React","useEffect","config","userPageQuery","AuthWrapper","Form","Page","data","loading","error","user","id","window","location","href","onSuccess","accessToken","refreshToken","localStorage","setItem","ACCESS_TOKEN_KEY","REFRESH_TOKEN_KEY"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,SAASC,MAAT,QAAuB,aAAvB;AACA,SAASC,aAAT,QAA8B,0BAA9B;AAEA,SAASC,WAAT,QAA4B,8BAA5B;AACA,SAASC,IAAT,QAAqB,oCAArB;AAEA,eAAe,SAASC,IAAT,GAAgB;AAC7B,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,OAAR;AAAiBC,IAAAA;AAAjB,MAA2BN,aAAa,EAA9C;AAEAF,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIO,OAAJ,EAAa;AACX;AACD;;AAED,QAAI,CAACC,KAAD,IAAUF,IAAV,aAAUA,IAAV,eAAUA,IAAI,CAAEG,IAAN,CAAWC,EAAzB,EAA6B;AAC3BC,MAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,QAAvB;AACD;AACF,GARQ,EAQN,CAACN,OAAD,EAAUD,IAAV,EAAgBE,KAAhB,CARM,CAAT;;AAUA,QAAMM,SAAS,GAAG,CAACC,WAAD,EAAsBC,YAAtB,KAA+C;AAC/DC,IAAAA,YAAY,CAACC,OAAb,CAAqBjB,MAAM,CAACkB,gBAA5B,EAA8CJ,WAA9C;AACAE,IAAAA,YAAY,CAACC,OAAb,CAAqBjB,MAAM,CAACmB,iBAA5B,EAA+CJ,YAA/C;AAEAL,IAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,QAAvB;AACD,GALD;;AAOA,sBACE,QAAC,WAAD;AAAa,IAAA,KAAK,EAAC,OAAnB;AAAA,2BACE,QAAC,IAAD;AAAM,MAAA,SAAS,EAAEC;AAAjB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAKD","sourcesContent":["import React, { useEffect } from 'react'\n\nimport { config } from '~src/config'\nimport { userPageQuery } from '~Admin/graphql/user-page'\n\nimport { AuthWrapper } from '~Auth/components/AuthWrapper'\nimport { Form } from '~Auth/routes/Login/components/Form'\n\nexport default function Page() {\n  const { data, loading, error } = userPageQuery()\n\n  useEffect(() => {\n    if (loading) {\n      return\n    }\n\n    if (!error && data?.user.id) {\n      window.location.href = '/admin'\n    }\n  }, [loading, data, error])\n\n  const onSuccess = (accessToken: string, refreshToken: string) => {\n    localStorage.setItem(config.ACCESS_TOKEN_KEY, accessToken)\n    localStorage.setItem(config.REFRESH_TOKEN_KEY, refreshToken)\n\n    window.location.href = '/admin'\n  }\n\n  return (\n    <AuthWrapper title=\"LOGIN\">\n      <Form onSuccess={onSuccess} />\n    </AuthWrapper>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}